!function(f){f(function(){f(document).on("submit","[data-safs]",function(t){t.preventDefault();var r=f(this),n=f("body"),e=r.attr("action");e=void 0!==e?e:window.location.href;var s=r.attr("method");s=void 0!==s&&0<=["get","post"].indexOf(s.toLowerCase())?s.toLowerCase():"get";var i=r.attr("data-safs-success-body");i=void 0!==i?i:"";var d=r.attr("data-safs-success-form");if(d=void 0!==d?d:"",r.is(".false")||r.is("[data-safs-during]"))return!1;r.attr("data-safs-during",!0);var a,o=!!r.find("[type=file]").length;o?(s="post",a=new FormData(r[0])):a=r.serializeArray(),f.ajax({data:a,method:s,url:e,async:!0,cache:!1,contentType:!1,processData:!o,xhr:function(){var t=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");return t.upload.addEventListener("progress",function(t){t.lengthComputable&&r.trigger("safs-upload-progress",[Math.round(100*t.loaded/t.total)])},!1),t}}).done(function(t,e,s){var a=!0;try{var o=f.parseJSON(s.responseText)}catch(t){a=!1}a&&(s.responseText=o,void 0!==s.responseText.location&&(r.addClass("false"),window.location=s.responseText.location)),r.trigger("safs-success",[s.responseText]),c(r,d,s.responseText),n.length&&c(n,i,s.responseText),r.is("[data-safs-success-reset]")&&r[0].reset()}).fail(function(t){r.trigger("safs-error",[t.responseText])}).always(function(){r.attr("data-safs-during",null)})});var c=function(e,t,s){t.length&&(t=t.split(" ")).length&&t.forEach(function(t){t&&e.trigger(t,[s])})}})}(jQuery);