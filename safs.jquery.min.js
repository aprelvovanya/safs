!function(u){u(function(){u(document).on("submit","[data-safs]",function(t){t.preventDefault();var o=u(this),n=u("body"),e=o.attr("action");e=void 0!==e?e:window.location.href;var s=o.attr("method");s=void 0!==s&&0<=["get","post"].indexOf(s.toLowerCase())?s.toLowerCase():"get";var i=o.is("[data-safs-xhr]"),d=o.attr("data-safs-success-body");d=void 0!==d?d:"";var c=o.attr("data-safs-success-form");if(c=void 0!==c?c:"",o.is(".false")||o.is("[data-safs-during]"))return!1;o.attr("data-safs-during",!0);var a,r=!!o.find("[type=file]").length;r?(s="post",a=new FormData(o[0])):a=o.serializeArray(),u.ajax({data:a,method:s,url:e,async:!0,cache:!1,contentType:!1,processData:!r,xhr:function(){var t=window.XMLHttpRequest?new window.XMLHttpRequest:new window.ActiveXObject("Microsoft.XMLHTTP");return t.upload.addEventListener("progress",function(t){t.lengthComputable&&o.trigger("safs-upload-progress",[Math.round(100*t.loaded/t.total)])},!1),t}}).done(function(t,e,s){var a=!0;try{var r=u.parseJSON(s.responseText)}catch(t){a=!1}a&&(s.responseText=r,void 0!==s.responseText.location&&(o.addClass("false"),window.location=s.responseText.location)),o.trigger("safs-success",[i?s:s.responseText]),f(o,c,i?s:s.responseText),n.length&&f(n,d,i?s:s.responseText),o.is("[data-safs-success-reset]")&&o[0].reset()}).fail(function(t){o.trigger("safs-error",[i?t:t.responseText])}).always(function(){o.attr("data-safs-during",null)})});var f=function(e,t,s){t.length&&(t=t.split(" ")).length&&t.forEach(function(t){t&&e.trigger(t,[s])})}})}(jQuery);